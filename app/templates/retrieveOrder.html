{% extends "base.html" %}
{% set active_page = "cart" %}
{% block title %} Devil's Kitchen - Cart {% endblock %}

{% block content %}

<style>
.btn.btn-danger{
	color: #dc3545;
	background-color: transparent;
	background-image: none;
	border-color: #dc3545;
}
.btn.btn-danger:hover{
	color: #ffffff;
	background-color: #dc3545;
	border-color: #dc3545;
}
</style>

<br>
<br>
<br>

{% if 'create_order' in session %}
<div class="alert alert-success alert-dismissible">
  <button type="button" class="close" data-dismiss="alert">&times;</button>
  Order ID {{ session.pop('create_order', None) }} has successfully been made.
</div>
{% endif %}

<div class="reservation-box">
	<div class="row">
		<div class="col-lg-12">
			<div class="heading-title text-center">
			<h2>Cart</h2>
				<div>
				  {% if count == 0 %}
				  <p>There are no orders.</p>
				  {% elif count == 1 %}
				  <p>There is 1 order.</p>
				  {% else %}
				  <p>There are {{ count }} orders.</p>
				  {% endif %}
				</div>
			</div>
		</div>
	</div>
</div>
<div>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Order ID</th>
        <th>Meat</th>
        <th>Sauce</th>
        <th>Order Item</th>
	    <th>Price</th>
	    <th>Remarks</th>
        <th></th>
        <th></th>
      </tr>
    </thead>
    <tbody>
	{% for order in order %}
	{% if order.user_id == session['user_id'] %}
      <tr>
        <td>{{ order.get_order_id() }}</td>
        {% if order.get_meat() == 'C' %}
        <td>Chicken</td>
        {% elif order.get_meat() == 'M' %}
        <td>Mutton</td>
        {% elif order.get_meat() == 'F' %}
        <td>Fish</td>
        {% elif order.get_meat() == 'V' %}
        <td>Vegetable</td>
        {% endif %}
        <td>{{ order.get_sauce() }}</td>
        <td>{{ order.get_order_item() }}</td>
	    <td>${{ order.get_price() }}</td>
	    <td>{{ order.get_remarks() }}</td>
        <td><a href="/updateOrder/{{order.get_order_id()}}" class="btn btn-common">Update</a>
        <td>
          <form action="{{url_for('deleteOrder', id=order.get_order_id())}}"  method="POST">
<!--            <input type="submit" value="Delete" class="btn btn-danger" onclick="return confirm('Confirm delete?');">-->
          <!-- Button to Open the Modal -->
    <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#myModal_{{order.get_order_id()}}">
      Delete
    </button>

    <!-- The Modal -->
    <div class="modal" id="myModal_{{order.get_order_id()}}">
      <div class="modal-dialog">
        <div class="modal-content">

          <!-- Modal Header -->
          <div class="modal-header">
            <h4 class="modal-title">Delete Confirmation</h4>
            <button type="button" class="close" data-dismiss="modal">&times;</button>
          </div>

          <!-- Modal body -->
          <div class="modal-body">
            Are you sure you want to delete {{order.get_order_item()}}?
          </div>

          <!-- Modal footer -->
          <div class="modal-footer">
            <input type="submit" value="Delete" class="btn btn-danger">
           <button type="button" class="btn btn-common" data-dismiss="modal">Cancel</button>
          </div>
		</div>
	  </div>
	</div>
		  </form>
        </td>
      </tr>
	{% endif %}
    {% endfor %}
    </tbody>
  </table>
	<div class="checkout text-center">
	<h1>Total Cost: ${{total}}</h1>
	  </form>	  
		<form method="POST">
	<button class="btn btn-common">Place Order</button>
		</form>
	</div>
	<p></p>
</div>

	<!-- Start Footer -->
	<footer class="footer-area bg-f">
		<div class="container">
			<div class="row">
				<div class="col-lg-3 col-md-6">
					<h3>About Us</h3>
					<p>Tom Sellers is the Chef Patron of Devil's Kitchen Restaurant. He dreamed of opening Devil's Kitchen Restaurant at the age of 19, and in April 2013, aged 26, was able to realise his dream. Tom trained at some of the worldâ€™s best restaurants including Restaurant Tom Aikens, Noma and Per Se. </p>
				</div>
				<div class="col-lg-3 col-md-6">
					<h3>Opening hours</h3>
					<p><span class="text-color">Monday: </span>  9AM - 10PM</p>
					<p><span class="text-color">Tue-Wed :</span> 9AM - 10PM</p>
					<p><span class="text-color">Thu-Fri :</span> 9AM - 10PM</p>
					<p><span class="text-color">Sat-Sun :</span> 5PM - 10PM</p>
				</div>
				<div class="col-lg-3 col-md-6">
					<h3>Contact information</h3>
					<p class="lead">50 Steven Road #02-10, Singapore 025123</p>
					<p class="lead"><a href="#">+65 9203 2103</a></p>
					<p><a href="#">staff@devilkitchen.yay</a></p>
				</div>
				<div class="col-lg-3 col-md-6">
					<h3>Subscribe</h3>
					<div class="subscribe_form">
						<form class="subscribe_form">
							<input name="EMAIL" id="subs-email" class="form_input" placeholder="Email Address..." type="email">
							<button type="submit" class="submit">SUBSCRIBE</button>
							<div class="clearfix"></div>
						</form>
					</div>

				</div>
			</div>
		</div>

		<div class="copyright">
			<div class="container">
				<div class="row">
					<div class="col-lg-12">
						<p class="company-name">All Rights Reserved. &copy; 2022 <a href="#">Devil's Kitchen Restaurant</a></p>
					</div>
				</div>
			</div>
		</div>

	</footer>
	<!-- End Footer -->

	<a href="#" id="back-to-top" title="Back to top" style="display: none;">&uarr;</a>
{% endblock %}
